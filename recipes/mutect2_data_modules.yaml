# hg19/p13
- name: hg19
  version: p13
  build_type: custom
  build_args:
    prereq_type: extract_file
    prereq_args:
      output_name: hg19.fa
      prereq_type: archive
      prereq_args:
        sha256: ac73947d38df63ccb00724520a5c31d880c1ca423702ca7ccb7e6c2182a362d9
        file: ucsc-goldenpath/hg19-20180821T12:56.fa.gz
    steps:
      - build_type: custom
        build_args:
          prereq_type: archive
          prereq_args:
            sha256: b404927655a4aada254ea94ad4da0c8901ed0737e67a0dcabedf673354b1f505
            file: ucsc-goldenpath/hg19-20090308T14:56.chrom.sizes
      - command:
          - /bin/bash
          - -c
          - 'cat download | grep -v _ | grep -v chrM | sort -V | sed s/\\t/\\t1\\t/ > hg19.chrom.sizes.bed;cat download | grep chrM | sed s/\\t/\\t1\\t/ >> hg19.chrom.sizes.bed;cat download | grep _ | sort -V | sed s/\\t/\\t1\\t/ >> hg19.chrom.sizes.bed'
      - build_type: copy
        build_args:
          from:
            - hg19.chrom.sizes.bed
      - command:
        - samtools
        - faidx
        - hg19.fa
      - command:
        - /bin/bash
        - -c
        - 'samtools faidx -n 50 hg19.fa chr1 chr2 chr3 chr4 chr5 chr6 chr7 chr8 chr9 chr10 chr11 chr12 chr13 chr14 chr15 chr16 chr17 chr18 chr19 chr20 chr21 chr22 chrX chrY chrM chr1_gl000191_random chr1_gl000192_random chr4_ctg9_hap1 chr4_gl000193_random chr4_gl000194_random chr6_apd_hap1 chr6_cox_hap2 chr6_dbb_hap3 chr6_mann_hap4 chr6_mcf_hap5 chr6_qbl_hap6 chr6_ssto_hap7 chr7_gl000195_random chr8_gl000196_random chr8_gl000197_random chr9_gl000198_random chr9_gl000199_random chr9_gl000200_random chr9_gl000201_random chr11_gl000202_random chr17_ctg5_hap1 chr17_gl000203_random chr17_gl000204_random chr17_gl000205_random chr17_gl000206_random chr18_gl000207_random chr19_gl000208_random chr19_gl000209_random chr21_gl000210_random chrUn_gl000211 chrUn_gl000212 chrUn_gl000213 chrUn_gl000214 chrUn_gl000215 chrUn_gl000216 chrUn_gl000217 chrUn_gl000218 chrUn_gl000219 chrUn_gl000220 chrUn_gl000221 chrUn_gl000222 chrUn_gl000223 chrUn_gl000224 chrUn_gl000225 chrUn_gl000226 chrUn_gl000227 chrUn_gl000228 chrUn_gl000229 chrUn_gl000230 chrUn_gl000231 chrUn_gl000232 chrUn_gl000233 chrUn_gl000234 chrUn_gl000235 chrUn_gl000236 chrUn_gl000237 chrUn_gl000238 chrUn_gl000239 chrUn_gl000240 chrUn_gl000241 chrUn_gl000242 chrUn_gl000243 chrUn_gl000244 chrUn_gl000245 chrUn_gl000246 chrUn_gl000247 chrUn_gl000248 chrUn_gl000249 -o hg19_random.fa'
      - command:
        - /bin/bash
        - -c
        - 'samtools faidx hg19_random.fa'
      - command:
        - /bin/bash
        - -c
        - 'java -jar $PICARD_ROOT/picard.jar CreateSequenceDictionary REFERENCE=hg19_random.fa OUTPUT=hg19_random.dict'
      - command:
        - /bin/bash
        - -c
        - 'faSplit byname hg19_random.fa {output_dir}/'
      - build_type: copy
        build_args:
          from:
            - hg19_random.fa
            - hg19_random.fa.fai
            - hg19_random.dict
      - build_type: verify
        build_args:
          # existing OICR specific checksums from
          # /oicr/data/reference/genomes/homo_sapiens_mc/UCSC/hg19_random/Genomic/references/fasta/original/hg19_random[.fa,.fa.fai]
          # we dont check .dict file - it is produced so that checksum does not match each time
          md5: |
            9a2f1ba93e690c99e6eaad88b43277e3  hg19_random.fa
            3f774d17ae1b0e78dee74226b4cd29c3  hg19_random.fa.fai
  depends:
    - name: samtools
      version: 1.9
      required_at: build
    - name: fasplit
      version: 1.0
      required_at: build
    - name: java
      version: 8
      required_at: build
    - name: picard
      version: 2.19.2
      required_at: build 